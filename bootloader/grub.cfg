# Aurora-OS GRUB Configuration
# Next-Generation Enterprise Operating System

set timeout=5
set default=0

# Aurora-OS Boot Menu
menuentry "Aurora-OS Enterprise Edition" {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw quiet splash aurora.mode=enterprise aurora.debug=false
    initrd /boot/initrd.gz
}

menuentry "Aurora-OS (Safe Mode)" {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw single aurora.mode=safe aurora.debug=true aurora.recovery=true
    initrd /boot/initrd.gz
}

menuentry "Aurora-OS (Debug Mode)" {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw earlyprintk=serial,ttyS0,115200 console=ttyS0,115200 aurora.mode=debug aurora.debug=true aurora.verbose=true
    initrd /boot/initrd.gz
}

menuentry "Aurora-OS (Recovery)" {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw aurora.recovery=true aurora.mode=recovery
    initrd /boot/initrd.gz
}

menuentry "Aurora-OS (FIPS Compliant)" {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw aurora.fips=true aurora.mode=enterprise aurora.security=strict
    initrd /boot/initrd.gz
}

# Legacy Boot Options
menuentry "Aurora-OS (Legacy BIOS)" --class gnu-linux --class gnu --class os {
    set gfxpayload=keep
    linux /boot/vmlinuz root=/dev/ram0 rw aurora.legacy=true
    initrd /boot/initrd.gz
}

# Advanced Options
submenu "Advanced Options" {
    menuentry "Aurora-OS with eBPF Debugging" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.ebpf.debug=true aurora.aie.debug=true
        initrd /boot/initrd.gz
    }
    
    menuentry "Aurora-OS with Time Travel Debugging" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.time.travel=true aurora.debug.record=true
        initrd /boot/initrd.gz
    }
    
    menuentry "Aurora-OS with Autonomous Mode" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.autonomous=true aurora.ai.level=maximum
        initrd /boot/initrd.gz
    }
}

# Development Options
submenu "Development Options" {
    menuentry "Aurora-OS Development Build" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.dev=true aurora.debug=true aurora.verbose=true
        initrd /boot/initrd.gz
    }
    
    menuentry "Aurora-OS Test Suite" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.test=all aurora.boot.test=true
        initrd /boot/initrd.gz
    }
}

# System Information
submenu "System Information" {
    menuentry "System Information" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.info=true
        initrd /boot/initrd.gz
    }
    
    menuentry "Hardware Test" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.hwtest=true
        initrd /boot/initrd.gz
    }
    
    menuentry "Memory Test" {
        set gfxpayload=keep
        linux /boot/vmlinuz root=/dev/ram0 rw aurora.memtest=true
        initrd /boot/initrd.gz
    }
}

# Fallback option
menuentry "System Restart" {
    reboot
}

menuentry "System Shutdown" {
    halt
}

# GRUB Configuration
if loadfont $font/font; then
    set gfxmode=auto
    set gfxpayload=keep
    insmod gfxterm
    insmod vbe
    insmod vga
    terminal_output gfxterm
fi

# Set background (if available)
if background_image /boot/grub/aurora-os.png; then
    set color_normal=light-gray/black
    set color_highlight=white/blue
else
    set color_normal=white/black
    set color_highlight=black/light-gray
fi

# Aurora-OS specific GRUB modules
insmod part_gpt
insmod ext2
insmod xfs
insmod btrfs
insmod fat
insmod ntfs

# Timeout configuration
if [ "${timeout}" != -1 ]; then
    if sleep --verbose --interruptible 5 ; then
        set timeout=-1
    fi
fi